import{e as Ee,d as Be,t as De,S as Me,s as Ne}from"./ShopCart-675d56e8.js";import{I as Ue,H as $e}from"./Header-6db2049e.js";import{c as $,k as H,t as L,l as U,q as ge,r as J,H as le,h as re,s as Fe,g as G,n as te,v as Q,j as be,e as Te,p as xe,m as I,a as Re,x as Ye,y as j,B as Ke,z as Ce}from"./userRouterHook-d892abf0.js";import{p as Le,a as je,P as qe,L as Oe,s as ze}from"./index-c5823def.js";/* empty css              */import{d as B,e as d,z as ue,s as ce,r as P,c as S,A as Qe,w as q,o as M,a as N,v as me,p as ke,h as Se,b as T,_ as ye,F as Xe,f as Je,u as ne,t as K,y as se}from"./index-5c713276.js";import{u as Ge,a as Ae}from"./use-touch-854fcecf.js";import"./index-e14613ff.js";const[Ze,k]=$("action-sheet"),We=H({},Le,{title:String,round:L,actions:U(),closeIcon:ge("cross"),closeable:L,cancelText:String,description:String,closeOnPopstate:L,closeOnClickAction:Boolean,safeAreaInsetBottom:L}),et=[...je,"round","closeOnPopstate","safeAreaInsetBottom"];var tt=B({name:Ze,props:We,emits:["select","cancel","update:show"],setup(e,{slots:t,emit:o}){const a=c=>o("update:show",c),l=()=>{a(!1),o("cancel")},m=()=>{if(e.title)return d("div",{class:k("header")},[e.title,e.closeable&&d(Ue,{name:e.closeIcon,class:[k("close"),le],onClick:l},null)])},f=()=>{if(t.cancel||e.cancelText)return[d("div",{class:k("gap")},null),d("button",{type:"button",class:k("cancel"),onClick:l},[t.cancel?t.cancel():e.cancelText])]},p=(c,v)=>c.loading?d(Oe,{class:k("loading-icon")},null):t.action?t.action({action:c,index:v}):[d("span",{class:k("name")},[c.name]),c.subname&&d("div",{class:k("subname")},[c.subname])],r=(c,v)=>{const{color:g,loading:x,callback:y,disabled:b,className:_}=c,C=()=>{b||x||(y&&y(c),e.closeOnClickAction&&a(!1),ce(()=>o("select",c,v)))};return d("button",{type:"button",style:{color:g},class:[k("item",{loading:x,disabled:b}),_],onClick:C},[p(c,v)])},i=()=>{if(e.description||t.description){const c=t.description?t.description():e.description;return d("div",{class:k("description")},[c])}};return()=>d(qe,ue({class:k(),position:"bottom","onUpdate:show":a},J(e,et)),{default:()=>{var c;return[m(),i(),d("div",{class:k("content")},[e.actions.map(r),(c=t.default)==null?void 0:c.call(t)]),f()]}})}});const nt=re(tt),[ot,V,fe]=$("picker"),we=e=>e.find(t=>!t.disabled)||e[0];function at(e,t){const o=e[0];if(o){if(Array.isArray(o))return"multiple";if(t.children in o)return"cascade"}return"default"}function X(e,t){t=G(t,0,e.length);for(let o=t;o<e.length;o++)if(!e[o].disabled)return o;for(let o=t-1;o>=0;o--)if(!e[o].disabled)return o;return 0}const ve=(e,t,o)=>t!==void 0&&!!e.find(a=>a[o.value]===t);function ie(e,t,o){const a=e.findIndex(m=>m[o.value]===t),l=X(e,a);return e[l]}function lt(e,t,o){const a=[];let l={[t.children]:e},m=0;for(;l&&l[t.children];){const f=l[t.children],p=o.value[m];if(l=Fe(p)?ie(f,p,t):void 0,!l&&f.length){const r=we(f)[t.value];l=ie(f,r,t)}m++,a.push(f)}return a}function ct(e){const{transform:t}=window.getComputedStyle(e),o=t.slice(7,t.length-1).split(", ")[5];return Number(o)}function st(e){return H({text:"text",value:"value",children:"children"},e)}const he=200,pe=300,it=15,[Ie,oe]=$("picker-column"),Pe=Symbol(Ie);var rt=B({name:Ie,props:{value:te,fields:Q(Object),options:U(),readonly:Boolean,allowHtml:Boolean,optionHeight:Q(Number),swipeDuration:Q(te),visibleOptionNum:Q(te)},emits:["change","clickOption","scrollInto"],setup(e,{emit:t,slots:o}){let a,l,m,f,p;const r=P(),i=P(),c=P(0),v=P(0),g=Ge(),x=()=>e.options.length,y=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,b=h=>{let n=X(e.options,h);const s=-n*e.optionHeight,u=()=>{n>x()-1&&(n=X(e.options,h));const E=e.options[n][e.fields.value];E!==e.value&&t("change",E)};a&&s!==c.value?p=u:u(),c.value=s},_=()=>e.readonly||!e.options.length,C=h=>{a||_()||(p=null,v.value=he,b(h),t("clickOption",e.options[h]))},O=h=>G(Math.round(-h/e.optionHeight),0,x()-1),A=S(()=>O(c.value)),w=(h,n)=>{const s=Math.abs(h/n);h=c.value+s/.003*(h<0?-1:1);const u=O(h);v.value=+e.swipeDuration,b(u)},F=()=>{a=!1,v.value=0,p&&(p(),p=null)},W=h=>{if(!_()){if(g.start(h),a){const n=ct(i.value);c.value=Math.min(0,n-y())}v.value=0,l=c.value,m=Date.now(),f=l,p=null}},ee=h=>{if(_())return;g.move(h),g.isVertical()&&(a=!0,xe(h,!0));const n=G(l+g.deltaY.value,-(x()*e.optionHeight),e.optionHeight),s=O(n);s!==A.value&&t("scrollInto",e.options[s]),c.value=n;const u=Date.now();u-m>pe&&(m=u,f=n)},R=()=>{if(_())return;const h=c.value-f,n=Date.now()-m;if(n<pe&&Math.abs(h)>it){w(h,n);return}const u=O(c.value);v.value=he,b(u),setTimeout(()=>{a=!1},0)},D=()=>{const h={height:`${e.optionHeight}px`};return e.options.map((n,s)=>{const u=n[e.fields.text],{disabled:E}=n,Y=n[e.fields.value],Ve={role:"button",style:h,tabindex:E?-1:0,class:[oe("item",{disabled:E,selected:Y===e.value}),n.className],onClick:()=>C(s)},He={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:u};return d("li",Ve,[o.option?o.option(n,s):d("div",He,null)])})};return be(Pe),Ae({stopMomentum:F}),Qe(()=>{const h=a?Math.floor(-c.value/e.optionHeight):e.options.findIndex(u=>u[e.fields.value]===e.value),n=X(e.options,h),s=-n*e.optionHeight;a&&n<h&&F(),c.value=s}),Te("touchmove",ee,{target:r}),()=>d("div",{ref:r,class:oe(),onTouchstartPassive:W,onTouchend:R,onTouchcancel:R},[d("ul",{ref:i,style:{transform:`translate3d(0, ${c.value+y()}px, 0)`,transitionDuration:`${v.value}ms`,transitionProperty:v.value?"all":"none"},class:oe("wrapper"),onTransitionend:F},[D()])])}});const[ut]=$("picker-toolbar"),Z={title:String,cancelButtonText:String,confirmButtonText:String},dt=["cancel","confirm","title","toolbar"],mt=Object.keys(Z);var ft=B({name:ut,props:Z,emits:["confirm","cancel"],setup(e,{emit:t,slots:o}){const a=()=>{if(o.title)return o.title();if(e.title)return d("div",{class:[V("title"),"van-ellipsis"]},[e.title])},l=()=>t("cancel"),m=()=>t("confirm"),f=()=>{const r=e.cancelButtonText||fe("cancel");return d("button",{type:"button",class:[V("cancel"),le],onClick:l},[o.cancel?o.cancel():r])},p=()=>{const r=e.confirmButtonText||fe("confirm");return d("button",{type:"button",class:[V("confirm"),le],onClick:m},[o.confirm?o.confirm():r])};return()=>d("div",{class:V("toolbar")},[o.toolbar?o.toolbar():[f(),a(),p()]])}});const[vt,ln]=$("picker-group"),ht=Symbol(vt);H({tabs:U(),activeTab:I(0),nextStepText:String},Z);const de=H({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:I(44),showToolbar:L,swipeDuration:I(1e3),visibleOptionNum:I(6)},Z),pt=H({},de,{columns:U(),modelValue:U(),toolbarPosition:ge("top"),columnsFieldNames:Object});var _t=B({name:ot,props:pt,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:t,slots:o}){const a=P(),l=P(e.modelValue.slice(0)),{parent:m}=be(ht),{children:f,linkChildren:p}=Re(Pe);p();const r=S(()=>st(e.columnsFieldNames)),i=S(()=>Ye(e.optionHeight)),c=S(()=>at(e.columns,r.value)),v=S(()=>{const{columns:n}=e;switch(c.value){case"multiple":return n;case"cascade":return lt(n,r.value,l);default:return[n]}}),g=S(()=>v.value.some(n=>n.length)),x=S(()=>v.value.map((n,s)=>ie(n,l.value[s],r.value))),y=S(()=>v.value.map((n,s)=>n.findIndex(u=>u[r.value.value]===l.value[s]))),b=(n,s)=>{if(l.value[n]!==s){const u=l.value.slice(0);u[n]=s,l.value=u}},_=()=>({selectedValues:l.value.slice(0),selectedOptions:x.value,selectedIndexes:y.value}),C=(n,s)=>{b(s,n),c.value==="cascade"&&l.value.forEach((u,E)=>{const Y=v.value[E];ve(Y,u,r.value)||b(E,Y.length?Y[0][r.value.value]:void 0)}),ce(()=>{t("change",H({columnIndex:s},_()))})},O=(n,s)=>{const u={columnIndex:s,currentOption:n};t("clickOption",H(_(),u)),t("scrollInto",u)},A=()=>{f.forEach(s=>s.stopMomentum());const n=_();return ce(()=>{t("confirm",n)}),n},w=()=>t("cancel",_()),F=()=>v.value.map((n,s)=>d(rt,{value:l.value[s],fields:r.value,options:n,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:i.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:u=>C(u,s),onClickOption:u=>O(u,s),onScrollInto:u=>{t("scrollInto",{currentOption:u,columnIndex:s})}},{option:o.option})),W=n=>{if(g.value){const s={height:`${i.value}px`},u={backgroundSize:`100% ${(n-i.value)/2}px`};return[d("div",{class:V("mask"),style:u},null),d("div",{class:[Ke,V("frame")],style:s},null)]}},ee=()=>{const n=i.value*+e.visibleOptionNum,s={height:`${n}px`};return d("div",{ref:a,class:V("columns"),style:s},[F(),W(n)])},R=()=>{if(e.showToolbar&&!m)return d(ft,ue(J(e,mt),{onConfirm:A,onCancel:w}),J(o,dt))};q(v,n=>{n.forEach((s,u)=>{s.length&&!ve(s,l.value[u],r.value)&&b(u,we(s)[r.value.value])})},{immediate:!0});let D;return q(()=>e.modelValue,n=>{!j(n,l.value)&&!j(n,D)&&(l.value=n.slice(0),D=n.slice(0))},{deep:!0}),q(l,n=>{j(n,e.modelValue)||(D=n.slice(0),t("update:modelValue",D))},{immediate:!0}),Te("touchmove",xe,{target:a}),Ae({confirm:A,getSelectedOptions:()=>x.value}),()=>{var n,s;return d("div",{class:V()},[e.toolbarPosition==="top"?R():null,e.loading?d(Oe,{class:V("loading")},null):null,(n=o["columns-top"])==null?void 0:n.call(o),ee(),(s=o["columns-bottom"])==null?void 0:s.call(o),e.toolbarPosition==="bottom"?R():null])}}});const gt=re(_t),bt=H({},de,{modelValue:U(),filter:Function,formatter:{type:Function,default:(e,t)=>t}}),Tt=Object.keys(de);function xt(e,t){if(e<0)return[];const o=Array(e);let a=-1;for(;++a<e;)o[a]=t(a);return o}const ae=(e,t,o,a,l,m)=>{const f=xt(t-e+1,p=>{const r=Ce(e+p);return a(o,{text:r,value:r})});return l?l(o,f,m):f},Ct=(e,t)=>e.map((o,a)=>{const l=t[a];if(l.length){const m=+l[0].value,f=+l[l.length-1].value;return Ce(G(+o,m,f))}return o}),[Ot]=$("time-picker"),_e=e=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(e),kt=["hour","minute","second"],St=H({},bt,{minHour:I(0),maxHour:I(23),minMinute:I(0),maxMinute:I(59),minSecond:I(0),maxSecond:I(59),minTime:{type:String,validator:_e},maxTime:{type:String,validator:_e},columnsType:{type:Array,default:()=>["hour","minute"]},filter:Function});var yt=B({name:Ot,props:St,emits:["confirm","cancel","change","update:modelValue"],setup(e,{emit:t,slots:o}){const a=P(e.modelValue),l=i=>{const c=i.split(":");return kt.map((v,g)=>e.columnsType.includes(v)?c[g]:"00")},m=S(()=>{let{minHour:i,maxHour:c,minMinute:v,maxMinute:g,minSecond:x,maxSecond:y}=e;if(e.minTime||e.maxTime){const b={hour:0,minute:0,second:0};e.columnsType.forEach((O,A)=>{var w;b[O]=(w=a.value[A])!=null?w:0});const{hour:_,minute:C}=b;if(e.minTime){const[O,A,w]=l(e.minTime);i=O,v=+_<=+i?A:"00",x=+_<=+i&&+C<=+v?w:"00"}if(e.maxTime){const[O,A,w]=l(e.maxTime);c=O,g=+_>=+c?A:"59",y=+_>=+c&&+C>=+g?w:"59"}}return e.columnsType.map(b=>{const{filter:_,formatter:C}=e;switch(b){case"hour":return ae(+i,+c,b,C,_,a.value);case"minute":return ae(+v,+g,b,C,_,a.value);case"second":return ae(+x,+y,b,C,_,a.value);default:return[]}})});q(a,i=>{j(i,e.modelValue)||t("update:modelValue",i)}),q(()=>e.modelValue,i=>{i=Ct(i,m.value),j(i,a.value)||(a.value=i)},{immediate:!0});const f=(...i)=>t("change",...i),p=(...i)=>t("cancel",...i),r=(...i)=>t("confirm",...i);return()=>d(gt,ue({modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,columns:m.value,onChange:f,onCancel:p,onConfirm:r},J(e,Tt)),o)}});const At=re(yt),wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAaCAYAAAC+aNwHAAAAAXNSR0IArs4c6QAAAjNJREFUOBGVlM1LVFEYxueeO9WAGEUI/QsRiCIEUSBFkK7mA1wMKIKKEBEJBbWwZbsCW4i0UJSYJkHmCxoLxXHjxpUIs5k/oRYDETEL751+r/mO5zqfHTjzvuc57/Oc53zccUK0YrF4pVarpV3XXY9GowXBem2mVCpFIOcgxD3P28pkMoleyVJnqtXqJnHsjHTJcZxNRCbOxl2DwfYSpD9aWa/Xw+TpbDabVKxTNOy5ZIwZp+i3Vegi9AmRSQtrmTqK5vP5e77vb0PsV4zo4242Ho+vW1ggNTrCyQHkxxB+KUaU+bVcLjdnYYG04UBRbN8h/47YNcUQrdOfxGKxj4ppbDhQALuH5I8gVBVDzKGv4OSpYhqbHOgETobIdyHeUEwiwgss8kGxJgc6QdERt/OQ8U/FJCK4hPgLxdoKSAEHexwOhx+Q/lCCRETesZ1Xkrfdgkxq42XeIt+j31RMItt509GBVexR7FtjTd2uDtqtjsJiIpF429FBoVC4TeE+PWCdw30tZPD2Z8DTHuTz3qVmQAq1sZWX3NB7HcuX19QgD/Nd7DDR8Q0IsekMuOMR8B2u6roUSGNVecrPeMrL/5Dz34DA/34HItPYAqd9l/E3Vr56rh+Sq5tn5VULC6SnApDvY7EIOfBfQOUMB7YRYFwYOJBHIX+F3GfNefzVTfOUUxbWMhUHz20yYifc8xTkLy0ZF0ATiUSSYl9wIdOTvZJPOfJTLpcvVyqVz5BTHFhWsF7bX0O7zus/dvPaAAAAAElFTkSuQmCC";const It=e=>(ke("data-v-b105c5b7"),e=e(),Se(),e),Pt={class:"time-picker"},Vt=It(()=>T("div",{class:"confirm"},"确定",-1)),Ht=B({__name:"TimePicker",props:{show:{type:Boolean,default:!1}},emits:["close","confirm"],setup(e,{emit:t}){const o=e,a=S(()=>o.show),l=P(["12","00"]),m=(r,i)=>r==="minute"?i.filter(c=>Number(c.value)%10===0):i;function f(){t("close")}function p(r){console.log("e",r),t("confirm",r)}return(r,i)=>{const c=At,v=nt;return M(),N("div",Pt,[d(v,{show:a.value,"onUpdate:show":i[1]||(i[1]=g=>a.value=g),onClickOverlay:f},{default:me(()=>[d(c,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=g=>l.value=g),title:"选择时间",filter:m,onCancel:f,onConfirm:p},{confirm:me(()=>[Vt]),_:1},8,["modelValue"])]),_:1},8,["show"])])}}});const Et=ye(Ht,[["__scopeId","data-v-b105c5b7"]]),z=e=>(ke("data-v-03c9d978"),e=e(),Se(),e),Bt={class:"order"},Dt=z(()=>T("p",{class:"title"},"商品信息",-1)),Mt={class:"order-list"},Nt={class:"order-item"},Ut={class:"name"},$t={class:"count"},Ft={class:"price"},Rt={class:"total van-hairline--bottom van-hairline--top"},Yt=z(()=>T("div",{class:"total-prompt"},"总计",-1)),Kt={class:"total-price"},Lt={class:"time van-hairline--bottom van-hairline--top"},jt=z(()=>T("span",{class:"time-prompt"},"取餐时间",-1)),qt={key:0,class:"time-selected"},zt={key:1},Qt=z(()=>T("img",{src:wt,alt:""},null,-1)),Xt=z(()=>T("div",{class:"prompt"},[T("p",{class:"prompt-title"},"友情提示"),T("p",{class:"prompt-detail"},[se(" 订餐人须于当天15：00前到201室办理外卖刷卡消费， "),T("br"),T("br"),se(" 温馨提示：保质期常温下2小时，低温保存24小时，再 ")])],-1)),Jt=B({__name:"Order",setup(e){const t=S(()=>Ee.value===2?"确定下单":"我的订单"),{cartList:o}=Be(),a=P(!1);function l(){a.value=!a.value}const m=P("");function f(r){m.value=`${r.selectedValues[0]}:${r.selectedValues[1]}`,l()}function p(){ze("下单成功")}return(r,i)=>(M(),N("div",Bt,[d($e,{title:t.value},null,8,["title"]),Dt,T("div",Mt,[(M(!0),N(Xe,null,Je(ne(o),c=>(M(),N("div",Nt,[T("p",Ut,K(c.name),1),T("p",$t,"X"+K(c[ne(Ne)]),1),T("p",Ft,"￥"+K(c.price),1)]))),256))]),T("div",Rt,[Yt,T("div",Kt,"￥"+K(ne(De)),1)]),T("div",Lt,[jt,T("span",{class:"time-select",onClick:l},[m.value?(M(),N("span",qt,K(m.value),1)):(M(),N("span",zt,[se(" 选择取餐时间 "),Qt]))])]),Xt,d(Me,{onHandle:p}),d(Et,{show:a.value,onClose:l,onConfirm:f},null,8,["show"])]))}});const cn=ye(Jt,[["__scopeId","data-v-03c9d978"]]);export{cn as default};
