import{d as P,r as M,e as l,H as oe,c as K,j as ae,z as J,I as se,o as B,a as b,F as U,f as V,i as le,b as m,t as R,g as p,y as ce,p as ie,h as re,_ as de}from"./index-7f21b8c6.js";import{u as ue,I as fe,H as me}from"./Header-1a708fe9.js";import{c as O,a as ge,t as z,h as D,k as x,q as k,n as X,A as he,p as _e,j as Be,C as be,r as ve,D as ye,E as j,F as Ce,G as pe,I as we,J as ke}from"./userRouterHook-7c5cfb7a.js";import{L as xe,p as Se,a as Pe,P as Te,c as Oe,m as De,u as Ie,b as F}from"./index-9303dcf7.js";import{a as Ee}from"./use-touch-57add087.js";import"./index-fb66476d.js";const[Y,q]=O("action-bar"),Q=Symbol(Y),Ae={placeholder:Boolean,safeAreaInsetBottom:z};var $e=P({name:Y,props:Ae,setup(e,{slots:s}){const n=M(),c=ue(n,q),{linkChildren:i}=ge(Q);i();const f=()=>{var g;return l("div",{ref:n,class:[q(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(g=s.default)==null?void 0:g.call(s)])};return()=>e.placeholder?c(f):f()}});const Ne=D($e),Z={to:[String,Object],url:String,replace:Boolean};function Re({to:e,url:s,replace:n,$router:c}){e&&c?c[n?"replace":"push"](e):s&&(n?location.replace(s):location.href=s)}function ee(){const e=oe().proxy;return()=>Re(e)}const[Fe,w]=O("button"),ze=x({},Z,{tag:k("button"),text:String,icon:String,type:k("default"),size:k("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:k("button"),loadingSize:X,loadingText:String,loadingType:String,iconPosition:k("left")});var He=P({name:Fe,props:ze,emits:["click"],setup(e,{emit:s,slots:n}){const c=ee(),i=()=>n.loading?n.loading():l(xe,{size:e.loadingSize,type:e.loadingType,class:w("loading")},null),f=()=>{if(e.loading)return i();if(n.icon)return l("div",{class:w("icon")},[n.icon()]);if(e.icon)return l(fe,{name:e.icon,class:w("icon"),classPrefix:e.iconPrefix},null)},g=()=>{let t;if(e.loading?t=e.loadingText:t=n.default?n.default():e.text,t)return l("span",{class:w("text")},[t])},a=()=>{const{color:t,plain:r}=e;if(t){const u={color:r?t:"white"};return r||(u.background=t),t.includes("gradient")?u.border=0:u.borderColor=t,u}},h=t=>{e.loading?_e(t):e.disabled||(s("click",t),c())};return()=>{const{tag:t,type:r,size:u,block:S,round:I,plain:E,square:A,loading:$,disabled:o,hairline:d,nativeType:y,iconPosition:_}=e,C=[w([r,u,{plain:E,block:S,round:I,square:A,loading:$,disabled:o,hairline:d}]),{[he]:d}];return l(t,{type:y,class:C,style:a(),disabled:o,onClick:h},{default:()=>[l("div",{class:w("content")},[_==="left"&&f(),g(),_==="right"&&f()])]})}}});const H=D(He),[Le,Me]=O("action-bar-button"),Ke=x({},Z,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ue=P({name:Le,props:Ke,setup(e,{slots:s}){const n=ee(),{parent:c,index:i}=Be(Q),f=K(()=>{if(c){const a=c.children[i.value-1];return!(a&&"isButton"in a)}}),g=K(()=>{if(c){const a=c.children[i.value+1];return!(a&&"isButton"in a)}});return Ee({isButton:!0}),()=>{const{type:a,icon:h,text:t,color:r,loading:u,disabled:S}=e;return l(H,{class:Me([a,{last:g.value,first:f.value}]),size:"large",type:a,icon:h,color:r,loading:u,disabled:S,onClick:n},{default:()=>[s.default?s.default():t]})}}});const W=D(Ue),[Ve,v,T]=O("dialog"),je=x({},Se,{title:String,theme:String,width:X,message:[String,Function],callback:Function,allowHtml:Boolean,className:be,transition:k("van-dialog-bounce"),messageAlign:String,closeOnPopstate:z,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:z,closeOnClickOverlay:Boolean}),qe=[...Pe,"transition","closeOnPopstate"];var te=P({name:Ve,props:je,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:s,slots:n}){const c=M(),i=ae({confirm:!1,cancel:!1}),f=o=>s("update:show",o),g=o=>{var d;f(!1),(d=e.callback)==null||d.call(e,o)},a=o=>()=>{e.show&&(s(o),e.beforeClose?(i[o]=!0,Oe(e.beforeClose,{args:[o],done(){g(o),i[o]=!1},canceled(){i[o]=!1}})):g(o))},h=a("cancel"),t=a("confirm"),r=se(o=>{var d,y;if(o.target!==((y=(d=c.value)==null?void 0:d.popupRef)==null?void 0:y.value))return;({Enter:e.showConfirmButton?t:j,Escape:e.showCancelButton?h:j})[o.key](),s("keydown",o)},["enter","esc"]),u=()=>{const o=n.title?n.title():e.title;if(o)return l("div",{class:v("header",{isolated:!e.message&&!n.default})},[o])},S=o=>{const{message:d,allowHtml:y,messageAlign:_}=e,C=v("message",{"has-title":o,[_]:_}),N=Ce(d)?d():d;return y&&typeof N=="string"?l("div",{class:C,innerHTML:N},null):l("div",{class:C},[N])},I=()=>{if(n.default)return l("div",{class:v("content")},[n.default()]);const{title:o,message:d,allowHtml:y}=e;if(d){const _=!!(o||n.title);return l("div",{key:y?1:0,class:v("content",{isolated:!_})},[S(_)])}},E=()=>l("div",{class:[we,v("footer")]},[e.showCancelButton&&l(H,{size:"large",text:e.cancelButtonText||T("cancel"),class:v("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&l(H,{size:"large",text:e.confirmButtonText||T("confirm"),class:[v("confirm"),{[pe]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:t},null)]),A=()=>l(Ne,{class:v("footer")},{default:()=>[e.showCancelButton&&l(W,{type:"warning",text:e.cancelButtonText||T("cancel"),class:v("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&l(W,{type:"danger",text:e.confirmButtonText||T("confirm"),class:v("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:t},null)]}),$=()=>n.footer?n.footer():e.theme==="round-button"?A():E();return()=>{const{width:o,title:d,theme:y,message:_,className:C}=e;return l(Te,J({ref:c,role:"dialog",class:[v([y]),C],style:{width:ye(o)},tabindex:0,"aria-labelledby":d||_,onKeydown:r,"onUpdate:show":f},ve(e,qe)),{default:()=>[u(),I(),$()]})}}});let L;const We={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Ge=x({},We);function Je(){({instance:L}=De({setup(){const{state:s,toggle:n}=Ie();return()=>l(te,J(s,{"onUpdate:show":n}),null)}}))}function Xe(e){return ke?new Promise((s,n)=>{L||Je(),L.open(x({},Ge,e,{callback:c=>{(c==="confirm"?s:n)(c)}}))}):Promise.resolve()}const G=e=>Xe(x({showCancelButton:!0},e));D(te);const ne=e=>(ie("data-v-51243f99"),e=e(),re(),e),Ye={class:"my-order no-scrollbar"},Qe={class:"order"},Ze={class:"food van-hairline--bottom"},et={class:"food-item"},tt={class:"food-item-name"},nt={class:"food-item-count"},ot={key:0,class:"time"},at={class:"total"},st={class:"total-price"},lt={class:"status"},ct={key:0,class:"handle"},it=["onClick"],rt=["onClick"],dt={key:1,class:"handle"},ut={key:2,class:"handle pay"},ft=ne(()=>m("p",{class:"pay-text"},"已付款",-1)),mt=ne(()=>m("p",{class:"pay-code"},"取货码：44387",-1)),gt=[ft,mt],ht={key:3,class:"handle done"},_t={key:4,class:"handle over-time"},Bt=P({__name:"MyOrder",setup(e){const s=M([]);function n(){le.get("getMyOrder").then(a=>{console.log("getMyOrder-res",a),s.value=c(a.data)}).catch(a=>{console.log("getMyOrder-err",a)})}n();function c(a){if(!Array.isArray(a))return a;const h=a;return h.forEach(t=>{let r=0;t.foods.forEach(u=>{r+=u.count*u.price}),t.totalPrice=r}),h}function i(a){console.log("handleCancel"),G({title:"确认撤销该订单？"}).then(()=>{F("撤销成功")}).catch(()=>{})}function f(a){F("模拟编辑成功")}function g(a){G({title:"确认该订单？"}).then(()=>{F("确认成功")}).catch(()=>{})}return(a,h)=>(B(),b("div",Ye,[l(me,{title:"我的订单"}),(B(!0),b(U,null,V(s.value,t=>(B(),b("div",Qe,[m("div",Ze,[(B(!0),b(U,null,V(t.foods,(r,u)=>(B(),b("div",et,[m("p",tt,R(r.name),1),m("p",nt,"X"+R(r.count),1),u===0?(B(),b("div",ot,"刚刚")):p("",!0)]))),256))]),m("div",at,[m("div",st,[ce(" 总计 "),m("span",null,"￥"+R(t.totalPrice),1)]),m("div",lt,[t.status===1?(B(),b("div",ct,[m("button",{class:"btn",onClick:r=>i()},"撤销",8,it),m("button",{class:"btn btn-green",onClick:r=>f()},"编辑",8,rt)])):p("",!0),t.status===2?(B(),b("div",dt,[m("button",{class:"btn btn-yellow",onClick:g},"确认下单")])):p("",!0),t.status===3?(B(),b("div",ut,gt)):p("",!0),t.status===4?(B(),b("div",ht,"已完成")):p("",!0),t.status===5?(B(),b("div",_t,"已过期")):p("",!0)])])]))),256))]))}});const kt=de(Bt,[["__scopeId","data-v-51243f99"]]);export{kt as default};
